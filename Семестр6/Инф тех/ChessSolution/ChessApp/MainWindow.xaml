<Window
    x:Class="ChessApp.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="clr-namespace:ChessApp.ViewModels"
    Title="ChessApp"
    Height="700" Width="800"
    WindowStartupLocation="CenterScreen">
  
  <Window.DataContext>
    <vm:MainWindowViewModel/>
  </Window.DataContext>

  <Grid Margin="10">
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="300"/>
      <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>

    <Image Source="pack://application:,,,/ChessApp;component/img/1.jpg"
           Stretch="Uniform"
           Margin="0,0,10,0"/>
    
    <StackPanel Grid.Column="1" VerticalAlignment="Top" >
      
      <DockPanel>
        <TextBox Text="{Binding AssemblyPath, UpdateSourceTrigger=PropertyChanged}"
                 Width="400"
                 Margin="0,0,5,0"/>
        <Button Content="Загрузить"
                Command="{Binding LoadAssemblyCommand}"/>
      </DockPanel>
      
      <TextBlock Text="Выберите класс:" Margin="0,15,0,5" FontWeight="Bold"/>
      <ComboBox ItemsSource="{Binding FigureTypes}"
                SelectedItem="{Binding SelectedType}"
                DisplayMemberPath="Name"
                Width="200"/>
      
      <TextBlock Text="Параметры конструктора:" Margin="0,15,0,5" FontWeight="Bold"/>
      <ItemsControl ItemsSource="{Binding ConstructorParameters}">
        <ItemsControl.ItemTemplate>
          <DataTemplate>
            <StackPanel Orientation="Horizontal" Margin="0,2">
              <TextBlock Text="{Binding ParameterInfo.Name}" Width="120"/>
              <TextBox Text="{Binding Value, UpdateSourceTrigger=PropertyChanged}"
                       Width="200"/>
            </StackPanel>
          </DataTemplate>
        </ItemsControl.ItemTemplate>
      </ItemsControl>
      
      <TextBlock Text="Выберите метод:" Margin="0,15,0,5" FontWeight="Bold"/>
      <ComboBox ItemsSource="{Binding Methods}"
                SelectedItem="{Binding SelectedMethod}"
                DisplayMemberPath="Name"
                Width="200"/>
      
      <TextBlock Text="Параметры метода:" Margin="0,15,0,5" FontWeight="Bold"/>
      <ItemsControl ItemsSource="{Binding MethodParameters}">
        <ItemsControl.ItemTemplate>
          <DataTemplate>
            <StackPanel Orientation="Horizontal" Margin="0,2">
              <TextBlock Text="{Binding ParameterInfo.Name}" Width="120"/>
              <TextBox Text="{Binding Value, UpdateSourceTrigger=PropertyChanged}"
                       Width="200"/>
            </StackPanel>
          </DataTemplate>
        </ItemsControl.ItemTemplate>
      </ItemsControl>
      
      <Button Content="Выполнить"
              Command="{Binding ExecuteCommand}"
              Width="100"
              Margin="0,20,0,0"
              HorizontalAlignment="Left"/>
    </StackPanel>
  </Grid>
</Window>
